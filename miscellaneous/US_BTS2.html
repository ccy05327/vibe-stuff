<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>北美購物最終決策儀表板：SFO vs. PDX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <!-- Chosen Palette: Warm Neutrals (Stone, with Teal/Emerald accent) -->
    <!-- Application Structure Plan: The application uses a top-down narrative structure. It begins with the "Final Verdict" to immediately answer the user's core question. It then visually explains the "why" behind the verdict using an interactive bar chart that highlights the "Tax-Free Trap." This is followed by a detailed data table for transparency. The structure concludes with a clear strategic takeaway. This answer-first, evidence-next approach is designed for rapid comprehension and decision-making. -->
    <!-- Visualization & Content Choices: 
        - Final Verdict: Goal: Inform. Viz: Styled HTML/CSS cards. Interaction: None. Justification: Presents the most critical information (the winner and final costs) in a highly scannable, upfront format.
        - Cost Structure Comparison: Goal: Compare/Explain. Viz: Grouped Bar Chart (Chart.js). Interaction: Hover tooltips. Justification: This is the core explanatory tool. It visually contrasts trip vs. product costs, making it immediately obvious that higher flight costs to PDX overwhelm its tax savings, thus demonstrating the "Tax-Free Trap."
        - Detailed Breakdown: Goal: Organize/Inform. Viz: HTML Table. Interaction: None. Justification: Provides full data transparency for users who want to examine the exact numbers behind the visual analysis.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
      body {
        font-family: "Noto Sans TC", sans-serif;
      }
      .chart-container {
        position: relative;
        width: 100%;
        height: 400px;
        max-height: 50vh;
        margin-left: auto;
        margin-right: auto;
      }
      @media (max-width: 768px) {
        .chart-container {
          height: 350px;
          max-height: 60vh;
        }
      }
    </style>
  </head>
  <body class="bg-stone-50 text-stone-800">
    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
      <header class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl font-bold text-teal-800 mb-2">
          北美購物最終決策儀表板
        </h1>
        <p class="text-lg text-stone-600">
          舊金山 (SFO) vs. 波特蘭 (PDX) 成本效益分析
        </p>
      </header>

      <main class="space-y-16">
        <!-- Section 1: The Final Verdict -->
        <section id="verdict">
          <h2 class="text-3xl font-bold text-center mb-4 text-teal-700">
            最終裁決
          </h2>
          <p class="text-center text-stone-600 mb-8 max-w-3xl mx-auto">
            綜合考量機票、住宿、稅務與所有相關開銷後，儘管波特蘭為免稅州，但舊金山依然是成本效益最高的選擇。
          </p>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div
              class="bg-white p-8 rounded-2xl shadow-lg border-2 border-emerald-500 relative"
            >
              <div
                class="absolute top-4 right-4 bg-emerald-100 text-emerald-800 text-xs font-bold px-3 py-1 rounded-full"
              >
                🏆 成本效益冠軍
              </div>
              <h3 class="text-3xl font-bold text-emerald-700">舊金山 (SFO)</h3>
              <p class="text-stone-500 mb-4">總體成本最低</p>
              <p class="text-5xl font-extrabold text-stone-800">$2,181.79</p>
              <p class="text-lg font-semibold text-stone-600 mt-1">
                約 NT$ 63,272
              </p>
            </div>
            <div
              class="bg-white p-8 rounded-2xl shadow-lg border border-stone-200"
            >
              <h3 class="text-3xl font-bold text-stone-600">波特蘭 (PDX)</h3>
              <p class="text-stone-500 mb-4">免稅州方案</p>
              <p class="text-5xl font-extrabold text-stone-800">$2,407.95</p>
              <p class="text-lg font-semibold text-stone-600 mt-1">
                約 NT$ 69,831
              </p>
            </div>
          </div>
          <div class="text-center mt-6">
            <p class="text-xl font-bold text-emerald-700">
              舊金山方案為您節省了 <span class="text-2xl">$226.16</span> 美元
              (約 NT$6,559)
            </p>
          </div>
        </section>

        <!-- Section 2: The "Why" - Visual Analysis -->
        <section id="analysis">
          <h2 class="text-3xl font-bold text-center mb-4 text-teal-700">
            視覺化分析：稅務天堂的陷阱
          </h2>
          <p class="text-center text-stone-600 mb-8 max-w-3xl mx-auto">
            為何免稅的波特蘭反而更貴？下圖揭示了成本結構的真相。波特蘭在「產品成本」上的微小優勢，完全被其高昂的「旅程成本」（尤其是機票）所吞噬。
          </p>
          <div
            class="bg-white p-4 md:p-8 rounded-2xl shadow-lg border border-stone-200"
          >
            <div class="chart-container max-w-4xl">
              <canvas id="costStructureChart"></canvas>
            </div>
          </div>
        </section>

        <!-- Section 3: Detailed Breakdown -->
        <section id="details">
          <h2 class="text-3xl font-bold text-center mb-4 text-teal-700">
            詳細成本分解表
          </h2>
          <p class="text-center text-stone-600 mb-8 max-w-3xl mx-auto">
            下表為您列出了構成總成本的每一個細項，所有數據均透明公開，匯率以 1
            USD = 29 TWD 計算。
          </p>
          <div
            class="overflow-x-auto bg-white p-2 rounded-2xl shadow-lg border border-stone-200"
          >
            <table class="w-full text-sm text-left text-stone-600">
              <thead class="text-xs text-stone-700 uppercase bg-stone-100">
                <tr>
                  <th scope="col" class="px-6 py-3 rounded-l-lg">成本項目</th>
                  <th scope="col" class="px-6 py-3 text-center">
                    方案一：舊金山 (SFO)
                  </th>
                  <th scope="col" class="px-6 py-3 text-center">
                    方案二：波特蘭 (PDX)
                  </th>
                  <th scope="col" class="px-6 py-3 rounded-r-lg text-center">
                    成本差異 (PDX vs SFO)
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr class="bg-white border-b">
                  <th
                    colspan="4"
                    class="px-6 py-2 font-bold text-teal-800 bg-teal-50"
                  >
                    旅程成本 (A)
                  </th>
                </tr>
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">🔹 來回機票</td>
                  <td class="px-6 py-4 text-center">$573.00</td>
                  <td class="px-6 py-4 text-center">$884.00</td>
                  <td class="px-6 py-4 text-center text-red-600 font-semibold">
                    +$311.00
                  </td>
                </tr>
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">🔹 住宿 (2晚)</td>
                  <td class="px-6 py-4 text-center">$42.00</td>
                  <td class="px-6 py-4 text-center">$80.00</td>
                  <td class="px-6 py-4 text-center text-red-600">+$38.00</td>
                </tr>
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">🔹 機場交通</td>
                  <td class="px-6 py-4 text-center">$4.50</td>
                  <td class="px-6 py-4 text-center">$5.00</td>
                  <td class="px-6 py-4 text-center text-red-600">+$0.50</td>
                </tr>
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">🔹 餐飲雜支</td>
                  <td class="px-6 py-4 text-center">$75.00</td>
                  <td class="px-6 py-4 text-center">$75.00</td>
                  <td class="px-6 py-4 text-center">$0.00</td>
                </tr>
                <tr class="bg-stone-50 font-bold">
                  <td class="px-6 py-4">旅程小計</td>
                  <td class="px-6 py-4 text-center">$700.20</td>
                  <td class="px-6 py-4 text-center">$1,044.00</td>
                  <td class="px-6 py-4 text-center text-red-600">+$343.80</td>
                </tr>
                <tr class="bg-white border-b">
                  <th
                    colspan="4"
                    class="px-6 py-2 font-bold text-teal-800 bg-teal-50"
                  >
                    產品落地成本 (B)
                  </th>
                </tr>
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">🔹 產品標價</td>
                  <td class="px-6 py-4 text-center">$1,299.00</td>
                  <td class="px-6 py-4 text-center">$1,299.00</td>
                  <td class="px-6 py-4 text-center">$0.00</td>
                </tr>
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">🔹 當地銷售稅</td>
                  <td class="px-6 py-4 text-center">$112.04 (8.625%)</td>
                  <td class="px-6 py-4 text-center">$0.00 (0%)</td>
                  <td
                    class="px-6 py-4 text-center text-green-600 font-semibold"
                  >
                    -$112.04
                  </td>
                </tr>
                <tr class="bg-white border-b">
                  <td class="px-6 py-4">🔹 台灣進口稅 (5%)</td>
                  <td class="px-6 py-4 text-center">$70.55</td>
                  <td class="px-6 py-4 text-center">$64.95</td>
                  <td class="px-6 py-4 text-center text-green-600">-$5.60</td>
                </tr>
                <tr class="bg-stone-50 font-bold">
                  <td class="px-6 py-4">產品小計</td>
                  <td class="px-6 py-4 text-center">$1,481.59</td>
                  <td class="px-6 py-4 text-center">$1,363.95</td>
                  <td class="px-6 py-4 text-center text-green-600">-$117.64</td>
                </tr>
              </tbody>
              <tfoot>
                <tr class="font-semibold text-stone-900 bg-stone-200">
                  <th scope="row" class="px-6 py-4 text-base rounded-l-lg">
                    最終總成本 (A+B)
                  </th>
                  <td class="px-6 py-4 text-center text-lg">$2,181.79</td>
                  <td class="px-6 py-4 text-center text-lg">$2,407.95</td>
                  <td
                    class="px-6 py-4 text-center text-lg text-red-600 rounded-r-lg"
                  >
                    +$226.16
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
        </section>

        <!-- Section 4: Final Advice -->
        <section id="advice">
          <h2 class="text-3xl font-bold text-center mb-4 text-teal-700">
            最終戰略建議
          </h2>
          <div
            class="bg-white p-8 rounded-2xl shadow-lg border border-stone-200 text-center"
          >
            <h3 class="text-2xl font-bold text-stone-800 mb-2">
              堅持選擇舊金山
            </h3>
            <p class="text-stone-600 max-w-2xl mx-auto">
              本次分析的核心洞見是：對於從台北出發的購物任務，**航空公司的定價策略遠比地方政府的稅收政策對總成本的影響更大**。舊金山作為主要國際航空樞紐，其低廉的機票價格建立了無法撼動的成本優勢。請專注執行舊金山方案，以達成最低總體支出的目標。
            </p>
          </div>
        </section>
      </main>

      <footer class="text-center mt-16 pt-8 border-t border-stone-200">
        <p class="text-sm text-stone-500">
          此分析報告基於2024年9月數據模擬，實際費用可能因時間、預訂平台及個人消費習慣而異。匯率以
          1 USD = 29 TWD 計算。
        </p>
      </footer>
    </div>

    <script>
      const costData = {
        sfo: {
          trip: 700.2,
          product: 1481.59,
        },
        pdx: {
          trip: 1044.0,
          product: 1363.95,
        },
      };

      const ctx = document
        .getElementById("costStructureChart")
        .getContext("2d");
      const costStructureChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["舊金山 (SFO)", "波特蘭 (PDX)"],
          datasets: [
            {
              label: "旅程成本 (機票/住宿等)",
              data: [costData.sfo.trip, costData.pdx.trip],
              backgroundColor: "#0d9488", // teal-600
              borderColor: "#0f766e", // teal-700
              borderWidth: 1,
            },
            {
              label: "產品落地成本 (含稅)",
              data: [costData.sfo.product, costData.pdx.product],
              backgroundColor: "#f59e0b", // amber-500
              borderColor: "#d97706", // amber-600
              borderWidth: 1,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: "成本 (美元)",
                font: { size: 14 },
              },
              ticks: {
                callback: function (value) {
                  return "$" + value;
                },
              },
            },
            x: {
              ticks: {
                font: { size: 14 },
              },
            },
          },
          plugins: {
            legend: {
              position: "top",
            },
            tooltip: {
              callbacks: {
                label: function (context) {
                  let label = context.dataset.label || "";
                  if (label) {
                    label += ": ";
                  }
                  if (context.parsed.y !== null) {
                    label += new Intl.NumberFormat("en-US", {
                      style: "currency",
                      currency: "USD",
                    }).format(context.parsed.y);
                  }
                  return label;
                },
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
