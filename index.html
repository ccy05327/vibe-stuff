<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibe Stuff Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        /* Light mode colors */
        --bg-primary: #f8fafc;
        --bg-secondary: #e0e7ef;
        --bg-gradient: linear-gradient(
          135deg,
          var(--bg-primary) 0%,
          var(--bg-secondary) 100%
        );
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --text-accent: #9ca3af;
        --card-bg: #ffffff;
        --card-border: rgba(59, 130, 246, 0.1);
        --card-hover-border: rgba(59, 130, 246, 0.3);
        --search-bg: #ffffff;
        --search-border: #e5e7eb;
        --search-focus-border: #60a5fa;
        --search-focus-ring: rgba(59, 130, 246, 0.1);
        --highlight-bg: #fef3c7;
        --section-blue: #1d4ed8;
        --section-green: #059669;
        --section-yellow: #d97706;
        --section-purple: #7c3aed;
        --toggle-bg: #e5e7eb;
        --toggle-hover: #d1d5db;
      }

      [data-theme="dark"] {
        /* Dark mode colors */
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-gradient: linear-gradient(
          135deg,
          var(--bg-primary) 0%,
          var(--bg-secondary) 100%
        );
        --text-primary: #f1f5f9;
        --text-secondary: #cbd5e1;
        --text-accent: #64748b;
        --card-bg: #1e293b;
        --card-border: rgba(59, 130, 246, 0.2);
        --card-hover-border: rgba(59, 130, 246, 0.4);
        --search-bg: #1e293b;
        --search-border: #374151;
        --search-focus-border: #60a5fa;
        --search-focus-ring: rgba(59, 130, 246, 0.2);
        --highlight-bg: #fbbf24;
        --section-blue: #3b82f6;
        --section-green: #10b981;
        --section-yellow: #f59e0b;
        --section-purple: #8b5cf6;
        --toggle-bg: #374151;
        --toggle-hover: #4b5563;
      }

      body {
        font-family: "Inter", sans-serif;
        background: var(--bg-gradient);
        color: var(--text-primary);
        transition: background 0.3s ease, color 0.3s ease;
      }
      .section-content {
        transition: all 0.3s ease-in-out;
        overflow: hidden;
      }
      .section-content.collapsed {
        max-height: 0;
        opacity: 0;
        margin-top: 0;
        margin-bottom: 0;
      }
      .section-toggle {
        transition: transform 0.3s ease-in-out;
      }
      .section-toggle.collapsed {
        transform: rotate(-90deg);
      }
      .section-header {
        cursor: pointer;
        user-select: none;
      }
      .section-header:hover {
        opacity: 0.8;
      }
      .search-item {
        transition: opacity 0.2s ease-in-out;
      }
      .search-item.hidden {
        display: none;
      }
      .search-highlight {
        background-color: var(--highlight-bg);
        color: var(--text-primary);
        padding: 1px 2px;
        border-radius: 2px;
      }

      .theme-toggle {
        background: var(--toggle-bg);
        border: 1px solid var(--card-border);
        border-radius: 8px;
        padding: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        margin-left: 20px;
      }

      .theme-toggle:hover {
        background: var(--toggle-hover);
        border-color: var(--card-hover-border);
        transform: scale(1.05);
      }

      .theme-toggle svg {
        color: var(--text-secondary);
        transition: all 0.3s ease;
      }

      .search-item {
        background: var(--card-bg) !important;
        border: 1px solid var(--card-border) !important;
        transition: all 0.3s ease !important;
      }

      .search-item:hover {
        border-color: var(--card-hover-border) !important;
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
      }

      [data-theme="dark"] .search-item:hover {
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3),
          0 4px 6px -2px rgba(0, 0, 0, 0.2) !important;
      }

      .card-title {
        color: var(--section-blue) !important;
      }

      .travel-section .card-title {
        color: var(--section-green) !important;
      }

      .learning-section .card-title {
        color: var(--section-yellow) !important;
      }

      .miscellaneous-section .card-title {
        color: var(--section-purple) !important;
      }

      .card-description {
        color: var(--text-secondary) !important;
      }

      .card-date {
        color: var(--text-accent) !important;
        background: var(--card-bg) !important;
      }

      .footer-text {
        color: var(--text-accent) !important;
      }

      /* View Toggle Styles */
      .section-content.grid-view {
        display: grid !important;
        grid-template-columns: 1fr;
        gap: 0.5rem;
      }

      @media (min-width: 640px) {
        .section-content.grid-view {
          grid-template-columns: repeat(2, 1fr);
          gap: 0.75rem;
        }
      }

      @media (min-width: 768px) {
        .section-content.grid-view {
          gap: 1rem;
        }
      }

      @media (min-width: 1024px) {
        .section-content.grid-view {
          gap: 1.25rem;
        }
      }

      .section-content.grid-view .search-item {
        height: auto;
        min-height: 140px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        padding: 1rem !important;
      }

      .section-content.grid-view .search-item .flex {
        flex-direction: column;
        align-items: center;
        width: 100%;
        height: 100%;
      }

      .section-content.grid-view .search-item .flex > span:first-child {
        margin: 0 0 0.75rem 0;
        font-size: 1.5rem;
      }

      .section-content.grid-view .search-item .min-w-0 {
        min-width: 100%;
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .section-content.grid-view
        .search-item
        .flex.items-start.justify-between {
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        width: 100%;
        height: 100%;
      }

      .section-content.grid-view .search-item .card-title {
        margin-bottom: 0.5rem !important;
        text-align: center;
        padding-right: 0 !important;
        line-height: 1.3;
        order: 1;
      }

      .section-content.grid-view .search-item .card-date {
        margin: 0.5rem 0 !important;
        align-self: center;
        order: 2;
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
        position: static !important;
      }

      .section-content.grid-view .search-item .card-description {
        text-align: center;
        margin-top: auto;
        order: 3;
        line-height: 1.4;
        margin-bottom: 0;
      }

      /* Fix the nested flex container in grid view */
      .section-content.grid-view
        .search-item
        .flex.items-start.justify-between {
        flex-direction: column !important;
        align-items: center !important;
        justify-content: flex-start !important;
        margin-bottom: 0 !important;
      }

      .section-content.grid-view
        .search-item
        .flex.items-start.justify-between
        > h3 {
        order: 1;
        margin-bottom: 0.5rem;
      }

      .section-content.grid-view
        .search-item
        .flex.items-start.justify-between
        > span {
        order: 2;
        margin-bottom: 0.5rem;
      }
    </style>
  </head>
  <body class="min-h-screen flex flex-col items-center justify-center">
    <header class="mb-6 mt-6 md:mb-10 md:mt-12 text-center px-3 relative">
      <!-- Theme Toggle -->
      <button
        id="themeToggle"
        class="theme-toggle fixed top-4 right-4 md:top-6 md:right-6 z-50"
        onclick="toggleTheme()"
        aria-label="Toggle dark mode"
      >
        <svg
          id="sunIcon"
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
          ></path>
        </svg>
        <svg
          id="moonIcon"
          class="w-5 h-5 hidden"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
          ></path>
        </svg>
      </button>

      <!-- View Toggle -->
      <button
        id="viewToggle"
        class="theme-toggle fixed top-4 right-16 md:top-6 md:right-20 z-50"
        onclick="toggleView()"
        aria-label="Toggle grid view"
      >
        <svg
          id="listIcon"
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 10h16M4 14h16M4 18h16"
          ></path>
        </svg>
        <svg
          id="gridIcon"
          class="w-5 h-5 hidden"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"
          ></path>
        </svg>
      </button>

      <h1
        class="text-2xl md:text-3xl lg:text-5xl font-extrabold mb-1 md:mb-2 leading-tight"
        style="color: var(--section-blue)"
      >
        Vibe Stuff Portal
      </h1>
      <p
        class="text-sm md:text-base lg:text-lg"
        style="color: var(--text-secondary)"
      >
        歡迎來到我的Vibe Coding小天地
      </p>
    </header>

    <!-- Search Section -->
    <div class="w-full max-w-2xl mx-auto px-3 md:px-4 mb-6">
      <div class="relative">
        <input
          type="text"
          id="searchInput"
          placeholder="Filter by date and search content... (e.g., '2025 travel' or 'June learning')"
          class="w-full p-3 md:p-4 rounded-xl outline-none transition-all duration-200 text-sm md:text-base"
          style="
            background: var(--search-bg);
            border: 1px solid var(--search-border);
            color: var(--text-primary);
          "
          oninput="filterItems()"
          onfocus="this.style.borderColor='var(--search-focus-border)'; this.style.boxShadow='0 0 0 3px var(--search-focus-ring)'"
          onblur="this.style.borderColor='var(--search-border)'; this.style.boxShadow='none'"
        />
        <div
          class="absolute right-3 top-1/2 transform -translate-y-1/2"
          style="color: var(--text-accent)"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            ></path>
          </svg>
        </div>
      </div>
      <div
        id="searchResults"
        class="mt-2 text-sm hidden"
        style="color: var(--text-secondary)"
      >
        <span id="resultsCount"></span>
      </div>
      <div
        id="noResults"
        class="mt-4 text-center hidden"
        style="color: var(--text-secondary)"
      >
        <p class="text-sm">No items found matching your search.</p>
        <button
          onclick="clearSearch()"
          class="mt-2 text-sm underline transition-colors"
          style="color: var(--section-blue)"
          onmouseover="this.style.opacity='0.8'"
          onmouseout="this.style.opacity='1'"
        >
          Clear search
        </button>
      </div>
    </div>

    <main class="w-full max-w-2xl mx-auto px-3 md:px-4">
      <div class="space-y-4 md:space-y-6 lg:space-y-10">
        <!-- Life Section -->
        <section>
          <h2
            class="section-header text-lg md:text-xl lg:text-2xl font-bold mb-2 md:mb-4 flex items-center justify-between"
            style="color: var(--section-blue)"
            onclick="toggleSection('life')"
          >
            <div class="flex items-center">
              <span class="mr-2 text-base md:text-lg lg:text-xl">🌱</span>Life
            </div>
            <span class="section-toggle text-lg">▼</span>
          </h2>
          <div
            id="life-content"
            class="section-content life-section space-y-2 md:space-y-3 lg:space-y-4"
          >
            <a
              href="life/mbti.html"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-blue-100 hover:border-blue-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >🧬</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      My MBTI Journey
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/06/28
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    歷年來的MBTI紀錄跟變化
                  </p>
                </div>
              </div>
            </a>
            <a
              href="life/questboard.html"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-blue-100 hover:border-blue-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >🗂️</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      Questboard Portal
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/06/25
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    Personal planner, checklist, and event tracker with
                    countdowns and calendar.
                  </p>
                </div>
              </div>
            </a>
          </div>
        </section>
        <!-- Travel Section -->
        <section>
          <h2
            class="section-header text-lg md:text-xl lg:text-2xl font-bold mb-2 md:mb-4 flex items-center justify-between"
            style="color: var(--section-green)"
            onclick="toggleSection('travel')"
          >
            <div class="flex items-center">
              <span class="mr-2 text-base md:text-lg lg:text-xl">🌏</span>Travel
            </div>
            <span class="section-toggle text-lg">▼</span>
          </h2>
          <div
            id="travel-content"
            class="section-content travel-section space-y-2 md:space-y-3 lg:space-y-4"
          >
            <a
              href="travel/淡蘭古道.html"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-green-100 hover:border-green-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >🥾</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      淡蘭北路
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/07/04
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    詳細規劃三天兩夜的淡蘭古道北路行程
                  </p>
                </div>
              </div>
            </a>
            <a
              href="travel/ST9.html"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-green-100 hover:border-green-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >🗺️</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      Upcoming Secret Trip
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/06/27
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    👀 upcoming ST9 trip
                  </p>
                </div>
              </div>
            </a>
            <a
              href="travel/ST8.html"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-green-100 hover:border-green-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >🧳</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      ST8 Trip
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/06/25
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    從計畫、預算、事後回顧，都詳細記錄了
                  </p>
                </div>
              </div>
            </a>
          </div>
        </section>
        <!-- Learning Section -->
        <section>
          <h2
            class="section-header text-lg md:text-xl lg:text-2xl font-bold mb-2 md:mb-4 flex items-center justify-between"
            style="color: var(--section-yellow)"
            onclick="toggleSection('learning')"
          >
            <div class="flex items-center">
              <span class="mr-2 text-base md:text-lg lg:text-xl">💡</span
              >Learning
            </div>
            <span class="section-toggle text-lg">▼</span>
          </h2>
          <div
            id="learning-content"
            class="section-content learning-section space-y-2 md:space-y-3 lg:space-y-4"
          >
            <a
              href="learning/iPAS_certification/"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-yellow-100 hover:border-yellow-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >🏆</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      iPAS AI 應用規劃師認證攻略
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/07/08
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    中文 | 專為倫敦大學電腦科學畢業生打造的iPAS
                    AI應用規劃師認證互動策略藍圖
                  </p>
                </div>
              </div>
            </a>
            <a
              href="learning/urban_stickiness/"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-yellow-100 hover:border-yellow-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >🏙️</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      The Magnetic City "黏"性最高的城市
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/07/05
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    中&英 | IG上 @seasia.news @seasia.stats
                    發文啟發的研究，英文版比較全面
                  </p>
                </div>
              </div>
            </a>
            <a
              href="learning/humidity_comparison/"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-yellow-100 hover:border-yellow-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >💧</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      全球濕度比較
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/06/28
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    中文 |
                    互動式儀表板，探索世界主要城市與台灣濕度的比較與氣候知識
                  </p>
                </div>
              </div>
            </a>
            <a
              href="learning/snap_judgement/"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-yellow-100 hover:border-yellow-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >⚡</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      Snap Judgement 速判
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/06/28
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    中&英 | 在IG上看到@a_day_mag的發文在講Snap
                    Judgement，想知道背後故事跟學習媒體識讀，就跑去做研究產生了這個網站
                  </p>
                </div>
              </div>
            </a>

            <a
              href="learning/HK-TW_healthcheck/index.html"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-yellow-100 hover:border-yellow-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >🏥</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      香港台灣健檢大比較
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/06/16
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    中文 |
                    本只是跟朋友聊到她要去做健檢，我問了價格發現比台灣便宜覺得困惑，按照香港物價/薪資所得，應該要比較貴才對，然後就產生這篇研究
                  </p>
                </div>
              </div>
            </a>
          </div>
        </section>
        <!-- Miscellaneous Section -->
        <section>
          <h2
            class="section-header text-lg md:text-xl lg:text-2xl font-bold mb-2 md:mb-4 flex items-center justify-between"
            style="color: var(--section-purple)"
            onclick="toggleSection('miscellaneous')"
          >
            <div class="flex items-center">
              <span class="mr-2 text-base md:text-lg lg:text-xl">🔧</span
              >Miscellaneous
            </div>
            <span class="section-toggle text-lg">▼</span>
          </h2>
          <div
            id="miscellaneous-content"
            class="section-content miscellaneous-section space-y-2 md:space-y-3 lg:space-y-4"
          >
            <a
              href="miscellaneous/US_BTS.html"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-purple-100 hover:border-purple-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >🍎</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      北美Apple購物成本分析儀表板
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/07/08
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    中文 | 互動式儀表板分析北美西岸四大城市的Back to
                    School購物成本，包含機票、住宿、稅務及產品總成本比較
                  </p>
                </div>
              </div>
            </a>
            <a
              href="miscellaneous/46XX_PAR1_Deletion/"
              class="search-item block bg-white rounded-xl shadow-md hover:shadow-lg transition p-3 md:p-4 lg:p-5 border border-purple-100 hover:border-purple-300 relative min-h-[64px] md:min-h-[56px]"
            >
              <div class="flex items-start">
                <span
                  class="text-lg md:text-xl lg:text-2xl mr-2 md:mr-3 lg:mr-4 mt-0.5"
                  >🧬</span
                >
                <div class="min-w-0 flex-1">
                  <div class="flex items-start justify-between mb-2">
                    <h3
                      class="card-title text-sm md:text-base lg:text-lg font-bold leading-tight pr-4"
                    >
                      46,XX DSD & PAR1 Deletion
                    </h3>
                    <span
                      class="card-date text-xs rounded px-1.5 py-0.5 shadow-sm whitespace-nowrap"
                    >
                      2025/06/19
                    </span>
                  </div>
                  <p class="card-description text-xs md:text-sm leading-tight">
                    英文 | 幫朋友測試gemini deep
                    research功能，協助同事工作上的事
                  </p>
                </div>
              </div>
            </a>
          </div>
        </section>
      </div>
      <footer
        class="mt-8 md:mt-12 text-center text-xs px-3 leading-relaxed footer-text"
      >
        &copy; 2025 Vibe Stuff, prompted by Cynthia using Gemini Deep Research +
        Cursor
      </footer>
    </main>

    <script>
      function toggleSection(sectionName) {
        const content = document.getElementById(sectionName + "-content");
        const toggle = document.querySelector(
          `[onclick="toggleSection('${sectionName}')"] .section-toggle`
        );

        if (content.classList.contains("collapsed")) {
          // Expand
          content.classList.remove("collapsed");
          content.style.maxHeight = content.scrollHeight + "px";
          toggle.classList.remove("collapsed");
        } else {
          // Collapse
          content.style.maxHeight = content.scrollHeight + "px";
          // Force reflow
          content.offsetHeight;
          content.style.maxHeight = "0";
          content.classList.add("collapsed");
          toggle.classList.add("collapsed");
        }
      }

      function parseSearchInput(searchInput) {
        const terms = searchInput.toLowerCase().trim().split(/\s+/);
        let dateFilter = "";
        let contentTerms = [];

        terms.forEach((term) => {
          if (isDateSearch(term)) {
            dateFilter = term;
          } else {
            contentTerms.push(term);
          }
        });

        return {
          dateFilter,
          contentSearch: contentTerms.join(" "),
          hasDateFilter: dateFilter !== "",
          hasContentSearch: contentTerms.length > 0,
        };
      }

      function filterItems() {
        const searchInput = document.getElementById("searchInput").value.trim();
        const searchItems = document.querySelectorAll(".search-item");
        const sections = ["life", "travel", "learning", "miscellaneous"];
        const searchResults = document.getElementById("searchResults");
        const resultsCount = document.getElementById("resultsCount");
        const noResults = document.getElementById("noResults");

        let visibleCount = 0;
        let hasVisibleItemsInSection = {};

        // Initialize section visibility tracking
        sections.forEach((section) => {
          hasVisibleItemsInSection[section] = false;
        });

        // Parse search input into date and content components
        const { dateFilter, contentSearch, hasDateFilter, hasContentSearch } =
          parseSearchInput(searchInput);
        const allContentTerms = hasContentSearch
          ? getSearchTerms(contentSearch)
          : [];

        searchItems.forEach((item) => {
          const title = item.querySelector("h3").textContent.toLowerCase();
          const description = item.querySelector("p").textContent.toLowerCase();
          const dateElement = item.querySelector("span.whitespace-nowrap");
          const itemDate = dateElement ? dateElement.textContent.trim() : "";

          let passesDateFilter = true;
          let passesContentFilter = true;
          let matchedDateTerm = "";
          let matchedContentTerm = "";

          // Apply date filter first
          if (hasDateFilter) {
            passesDateFilter = matchesDateSearch(itemDate, dateFilter);
            if (passesDateFilter) {
              matchedDateTerm = dateFilter;
            }
          }

          // Apply content filter to date-filtered results
          if (hasContentSearch && passesDateFilter) {
            passesContentFilter = false;
            for (const term of allContentTerms) {
              const termLower = term.toLowerCase();
              if (
                title.includes(termLower) ||
                description.includes(termLower)
              ) {
                passesContentFilter = true;
                matchedContentTerm = term;
                break;
              }
            }
          }

          // Show item if it passes all active filters
          const shouldShow =
            searchInput === "" || (passesDateFilter && passesContentFilter);

          if (shouldShow) {
            item.classList.remove("hidden");
            visibleCount++;

            // Track which section this item belongs to
            const parentSection = item.closest('[id$="-content"]');
            if (parentSection) {
              const sectionName = parentSection.id.replace("-content", "");
              hasVisibleItemsInSection[sectionName] = true;
            }

            // Remove any existing highlights and add new ones
            removeHighlights(item);

            if (searchInput !== "") {
              // Highlight date filter matches
              if (hasDateFilter && passesDateFilter && dateElement) {
                const originalDate =
                  dateElement.getAttribute("data-original-date") ||
                  dateElement.textContent;
                if (!dateElement.getAttribute("data-original-date")) {
                  dateElement.setAttribute("data-original-date", originalDate);
                }
                const regex = new RegExp(
                  `(${escapeRegex(matchedDateTerm)})`,
                  "gi"
                );
                const highlightedDate = originalDate.replace(
                  regex,
                  '<span class="search-highlight">$1</span>'
                );
                dateElement.innerHTML = highlightedDate;
              }

              // Highlight content filter matches
              if (hasContentSearch && passesContentFilter) {
                highlightText(item, contentSearch);
                // Also highlight matched translation term if different
                if (
                  matchedContentTerm !== contentSearch &&
                  matchedContentTerm.toLowerCase() !==
                    contentSearch.toLowerCase()
                ) {
                  highlightText(item, matchedContentTerm);
                }
              }
            }
          } else {
            item.classList.add("hidden");
            removeHighlights(item);
          }
        });

        // Show/hide sections based on whether they have visible items
        sections.forEach((sectionName) => {
          const sectionContent = document.getElementById(
            sectionName + "-content"
          );
          const sectionHeader = document.querySelector(
            `[onclick="toggleSection('${sectionName}')"]`
          );
          const toggle = sectionHeader.querySelector(".section-toggle");

          if (searchInput === "" || hasVisibleItemsInSection[sectionName]) {
            sectionHeader.style.display = "flex";
            if (searchInput !== "") {
              // Auto-expand sections with results
              sectionContent.classList.remove("collapsed");
              sectionContent.style.maxHeight =
                sectionContent.scrollHeight + "px";
              toggle.classList.remove("collapsed");
            } else {
              // When search is cleared, recalculate height for expanded sections
              if (!sectionContent.classList.contains("collapsed")) {
                sectionContent.style.maxHeight =
                  sectionContent.scrollHeight + "px";
              }
            }
          } else {
            sectionHeader.style.display = "none";
          }
        });

        // Update search results display
        if (searchInput === "") {
          searchResults.classList.add("hidden");
          noResults.classList.add("hidden");

          // Ensure all sections are visible and properly sized when search is cleared
          sections.forEach((sectionName) => {
            const sectionHeader = document.querySelector(
              `[onclick="toggleSection('${sectionName}')"]`
            );
            const sectionContent = document.getElementById(
              sectionName + "-content"
            );
            sectionHeader.style.display = "flex";

            // Recalculate height for expanded sections
            if (!sectionContent.classList.contains("collapsed")) {
              setTimeout(() => {
                sectionContent.style.maxHeight =
                  sectionContent.scrollHeight + "px";
              }, 10);
            }
          });
        } else {
          if (visibleCount > 0) {
            let filterInfo = [];

            if (hasDateFilter) {
              filterInfo.push(`date: ${dateFilter}`);
            }

            if (hasContentSearch) {
              const usingTranslations = allContentTerms.length > 1;
              if (usingTranslations) {
                filterInfo.push(`content: ${contentSearch} (bilingual)`);
              } else {
                filterInfo.push(`content: ${contentSearch}`);
              }
            }

            const filterText =
              filterInfo.length > 0 ? ` (${filterInfo.join(", ")})` : "";

            resultsCount.textContent = `Found ${visibleCount} item${
              visibleCount === 1 ? "" : "s"
            }${filterText}`;
            searchResults.classList.remove("hidden");
            noResults.classList.add("hidden");
          } else {
            searchResults.classList.add("hidden");
            noResults.classList.remove("hidden");
          }
        }
      }

      function clearSearch() {
        document.getElementById("searchInput").value = "";
        filterItems();

        // Force recalculation of section heights after clearing search
        setTimeout(() => {
          const sections = ["life", "travel", "learning", "miscellaneous"];
          sections.forEach((sectionName) => {
            const content = document.getElementById(sectionName + "-content");
            if (!content.classList.contains("collapsed")) {
              content.style.maxHeight = content.scrollHeight + "px";
            }
          });
        }, 50);
      }

      function highlightText(item, searchTerm) {
        const title = item.querySelector("h3");
        const description = item.querySelector("p");

        [title, description].forEach((element) => {
          // Store original text only once
          if (!element.getAttribute("data-original-text")) {
            element.setAttribute("data-original-text", element.textContent);
          }

          // Get current content (which might already have highlights)
          const currentContent = element.innerHTML;
          const regex = new RegExp(`(${escapeRegex(searchTerm)})`, "gi");

          // Only add highlights if this term isn't already highlighted
          if (
            !currentContent.includes(`>${searchTerm}<`) &&
            !currentContent.includes(`>${searchTerm.toLowerCase()}<`) &&
            !currentContent.includes(`>${searchTerm.toUpperCase()}<`)
          ) {
            const highlightedText = currentContent.replace(
              regex,
              '<span class="search-highlight">$1</span>'
            );
            element.innerHTML = highlightedText;
          }
        });
      }

      function removeHighlights(item) {
        const title = item.querySelector("h3");
        const description = item.querySelector("p");
        const dateElement = item.querySelector("span.whitespace-nowrap");

        [title, description].forEach((element) => {
          const originalText = element.getAttribute("data-original-text");
          if (originalText) {
            element.textContent = originalText;
          }
        });

        // Also restore original date text
        if (dateElement) {
          const originalDate = dateElement.getAttribute("data-original-date");
          if (originalDate) {
            dateElement.textContent = originalDate;
          }
        }
      }

      function escapeRegex(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
      }

      // Bilingual translation dictionary for search enhancement
      const translationMap = {
        // Travel related
        travel: ["旅行", "旅遊", "出遊"],
        trip: ["旅行", "行程", "旅遊"],
        journey: ["旅程", "行程"],
        planning: ["規劃", "計畫"],
        itinerary: ["行程"],

        // Learning/Research related
        research: ["研究", "調查"],
        study: ["學習", "研究"],
        learning: ["學習", "學會"],
        analysis: ["分析", "研究"],
        comparison: ["比較", "對比"],
        interactive: ["互動", "互動式"],
        dashboard: ["儀表板", "控制台"],

        // Health related
        health: ["健康", "健檢"],
        medical: ["醫療", "醫學"],
        checkup: ["健檢", "檢查"],

        // Technology related
        certification: ["認證", "證照"],
        application: ["應用", "申請"],
        planner: ["規劃師", "規劃"],
        portal: ["入口", "門戶"],

        // Life related
        life: ["生活", "人生"],
        personal: ["個人", "私人"],
        questboard: ["任務板", "清單"],
        tracker: ["追蹤", "記錄"],
        calendar: ["日曆", "行事曆"],

        // General terms
        cost: ["成本", "費用", "價格"],
        price: ["價格", "費用"],
        shopping: ["購物", "買東西"],
        city: ["城市", "都市"],
        urban: ["城市", "都市"],
        magnetic: ["磁性", "吸引", "黏性"],
        humidity: ["濕度", "潮濕"],
        global: ["全球", "世界"],
        world: ["世界", "全球"],
        snap: ["快速", "速判"],
        judgement: ["判斷", "速判"],
        judgment: ["判斷", "速判"],
        secret: ["秘密", "神秘"],
        upcoming: ["即將", "未來"],

        // Specific content terms
        mbti: ["MBTI", "人格", "性格"],
        personality: ["人格", "性格", "MBTI"],
        apple: ["蘋果", "Apple"],
        hongkong: ["香港", "HK"],
        taiwan: ["台灣", "TW", "臺灣"],
        ipas: ["iPAS", "認證"],
        trail: ["古道", "步道"],
        hiking: ["健行", "登山", "徒步"],
        genetics: ["基因", "遺傳", "染色體"],
        chromosome: ["染色體", "基因"],
        dsd: ["DSD", "性發育"],

        // Chinese to English
        旅行: ["travel", "trip", "journey"],
        旅遊: ["travel", "tourism", "trip"],
        行程: ["itinerary", "schedule", "trip"],
        規劃: ["planning", "plan"],
        計畫: ["plan", "planning"],
        研究: ["research", "study", "analysis"],
        學習: ["learning", "study"],
        分析: ["analysis", "analyze"],
        比較: ["comparison", "compare"],
        互動: ["interactive"],
        儀表板: ["dashboard"],
        健康: ["health"],
        健檢: ["health checkup", "medical checkup"],
        認證: ["certification"],
        應用: ["application"],
        規劃師: ["planner"],
        生活: ["life"],
        個人: ["personal"],
        成本: ["cost"],
        費用: ["cost", "price", "fee"],
        價格: ["price", "cost"],
        購物: ["shopping"],
        城市: ["city", "urban"],
        都市: ["city", "urban"],
        濕度: ["humidity"],
        全球: ["global", "world"],
        世界: ["world", "global"],
        速判: ["snap judgment", "quick judgment"],
        判斷: ["judgment", "judgement"],
        秘密: ["secret"],
        即將: ["upcoming"],
        未來: ["future", "upcoming"],

        // Specific content reverse mappings
        人格: ["personality", "mbti"],
        性格: ["personality", "character", "mbti"],
        蘋果: ["apple"],
        香港: ["hongkong", "hk"],
        台灣: ["taiwan", "tw"],
        臺灣: ["taiwan", "tw"],
        古道: ["trail", "path"],
        步道: ["trail", "hiking path"],
        健行: ["hiking"],
        登山: ["hiking", "climbing"],
        徒步: ["hiking", "walking"],
        基因: ["genetics", "gene"],
        遺傳: ["genetics", "heredity"],
        染色體: ["chromosome"],
        性發育: ["dsd", "sexual development"],
      };

      function getSearchTerms(searchTerm) {
        const terms = [searchTerm];
        const lowerTerm = searchTerm.toLowerCase();

        // Add translations if they exist
        if (translationMap[lowerTerm]) {
          terms.push(...translationMap[lowerTerm]);
        }

        // Also check for partial matches in translation keys
        Object.keys(translationMap).forEach((key) => {
          if (key.includes(lowerTerm) || lowerTerm.includes(key)) {
            terms.push(key);
            terms.push(...translationMap[key]);
          }
        });

        // Remove duplicates and return
        return [...new Set(terms)];
      }

      function isDateSearch(searchTerm) {
        // Check if the search term looks like a date
        const datePatterns = [
          /^\d{4}$/, // Year: 2025
          /^\d{4}\/\d{1,2}$/, // Year/Month: 2025/06 or 2025/6
          /^\d{4}\/\d{1,2}\/\d{1,2}$/, // Full date: 2025/06/28
          /^\d{1,2}\/\d{4}$/, // Month/Year: 06/2025
          /^\d{1,2}\/\d{1,2}\/\d{4}$/, // Month/Day/Year: 06/28/2025
          /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i, // Month names
          /^(january|february|march|april|may|june|july|august|september|october|november|december)/i,
        ];

        return datePatterns.some((pattern) => pattern.test(searchTerm.trim()));
      }

      function matchesDateSearch(dateString, searchTerm) {
        if (!dateString || !searchTerm) return false;

        const search = searchTerm.toLowerCase().trim();

        // Extract date parts from the item's date (format: 2025/06/28)
        const dateParts = dateString.split("/");
        if (dateParts.length !== 3) return false;

        const [year, month, day] = dateParts;
        const monthNum = parseInt(month);
        const dayNum = parseInt(day);

        // Month name mappings
        const monthNames = {
          1: ["jan", "january"],
          2: ["feb", "february"],
          3: ["mar", "march"],
          4: ["apr", "april"],
          5: ["may", "may"],
          6: ["jun", "june"],
          7: ["jul", "july"],
          8: ["aug", "august"],
          9: ["sep", "september"],
          10: ["oct", "october"],
          11: ["nov", "november"],
          12: ["dec", "december"],
        };

        // Check various date format matches
        if (search === year) return true; // Year match: 2025
        if (search === `${year}/${month}` || search === `${year}/${monthNum}`)
          return true; // 2025/06 or 2025/6
        if (search === dateString) return true; // Exact match: 2025/06/28
        if (search === `${month}/${year}` || search === `${monthNum}/${year}`)
          return true; // 06/2025
        if (
          search === `${month}/${day}/${year}` ||
          search === `${monthNum}/${dayNum}/${year}`
        )
          return true; // 06/28/2025

        // Month name matching
        if (monthNames[monthNum]) {
          for (const monthName of monthNames[monthNum]) {
            if (search.includes(monthName)) {
              // Check if year is also specified
              if (search.includes(year)) return true;
              // Or just month name match
              if (search === monthName) return true;
            }
          }
        }

        // Partial matches for flexible searching
        if (search.includes(year) || year.includes(search)) return true;
        if (search.includes(month) || month.includes(search)) return true;
        if (search.includes(day) || day.includes(search)) return true;

        return false;
      }

      // Theme toggle functionality
      function toggleTheme() {
        const currentTheme =
          document.documentElement.getAttribute("data-theme");
        const newTheme = currentTheme === "dark" ? "light" : "dark";

        document.documentElement.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);

        // Toggle icon visibility
        const sunIcon = document.getElementById("sunIcon");
        const moonIcon = document.getElementById("moonIcon");

        if (newTheme === "dark") {
          sunIcon.classList.add("hidden");
          moonIcon.classList.remove("hidden");
        } else {
          sunIcon.classList.remove("hidden");
          moonIcon.classList.add("hidden");
        }
      }

      // View toggle functionality
      function toggleView() {
        const listIcon = document.getElementById("listIcon");
        const gridIcon = document.getElementById("gridIcon");
        const sections = ["life", "travel", "learning", "miscellaneous"];

        // Get current view state
        const isGridView = !listIcon.classList.contains("hidden");

        // Toggle icon visibility
        listIcon.classList.toggle("hidden");
        gridIcon.classList.toggle("hidden");

        // Toggle grid view class on all sections
        sections.forEach((sectionName) => {
          const sectionContent = document.getElementById(
            sectionName + "-content"
          );
          if (isGridView) {
            sectionContent.classList.add("grid-view");
          } else {
            sectionContent.classList.remove("grid-view");
          }

          // Recalculate heights for expanded sections after layout change
          if (!sectionContent.classList.contains("collapsed")) {
            setTimeout(() => {
              sectionContent.style.maxHeight =
                sectionContent.scrollHeight + "px";
            }, 50);
          }
        });

        // Save view preference
        localStorage.setItem("viewMode", isGridView ? "grid" : "list");
      }

      // Initialize theme on page load
      function initializeTheme() {
        // Check for saved theme preference or default to 'light'
        const savedTheme = localStorage.getItem("theme") || "light";
        document.documentElement.setAttribute("data-theme", savedTheme);

        // Set initial icon state
        const sunIcon = document.getElementById("sunIcon");
        const moonIcon = document.getElementById("moonIcon");

        if (savedTheme === "dark") {
          sunIcon.classList.add("hidden");
          moonIcon.classList.remove("hidden");
        } else {
          sunIcon.classList.remove("hidden");
          moonIcon.classList.add("hidden");
        }
      }

      // Initialize view mode
      function initializeView() {
        const savedView = localStorage.getItem("viewMode") || "list";
        const listIcon = document.getElementById("listIcon");
        const gridIcon = document.getElementById("gridIcon");
        const sections = ["life", "travel", "learning", "miscellaneous"];

        if (savedView === "grid") {
          listIcon.classList.add("hidden");
          gridIcon.classList.remove("hidden");

          sections.forEach((sectionName) => {
            const sectionContent = document.getElementById(
              sectionName + "-content"
            );
            sectionContent.classList.add("grid-view");
          });
        } else {
          listIcon.classList.remove("hidden");
          gridIcon.classList.add("hidden");

          sections.forEach((sectionName) => {
            const sectionContent = document.getElementById(
              sectionName + "-content"
            );
            sectionContent.classList.remove("grid-view");
          });
        }
      }

      // Initialize all sections as expanded on page load
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize theme first
        initializeTheme();

        // Initialize view mode
        initializeView();

        const sections = ["life", "travel", "learning", "miscellaneous"];
        sections.forEach((sectionName) => {
          const content = document.getElementById(sectionName + "-content");
          content.style.maxHeight = content.scrollHeight + "px";
        });
      });
    </script>
  </body>
</html>
